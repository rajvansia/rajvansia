<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>React Native Firbase &mdash; Raj Vansia</title>
  <!--[if lt IE 9]><script src='https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js'></script><![endif]-->

  <link rel="stylesheet" href="/assets/normalize.css">
<link rel="stylesheet" href="/assets/core.css">
<link rel="stylesheet" href="/assets/buttons.css">
<link rel="stylesheet" href="/assets/icons.css">
<link rel="stylesheet" href="/assets/article.css">
<link rel="stylesheet" href="/assets/contact_form.css">
<link rel="stylesheet" href="/assets/syntax.css">
<link rel="stylesheet" href="/assets/google_map_container.css">
<link rel="stylesheet" href="/assets/cover.css">
<link rel="stylesheet" href="/assets/pagination.css">
<link rel="stylesheet" href="/assets/site_header.css">
<link rel="stylesheet" href="/assets/site_footer.css">
<link rel="stylesheet" href="/assets/responsive.css">
<link rel="stylesheet" href="/assets/app.css">
  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<!--
<script src="/assets/google_map_fix.js"></script>
<script src="/assets/zoomable_image.js"></script> -->
<script src="/assets/app.js"></script>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>






<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
<link rel="icon" href="/images/favicon.ico" type="image/x-icon">

  <meta name="title" content="The Patient Generated Health Data Deluge ">
  <!-- <link rel="canonical" href="http://willkoehler.net/2014/12/22/alternate-route-options-for-the-olentangy-trail.html"> -->

         <!--
  <meta property="og:title" content="Alternate Route Options For The Olentangy Trail"/>
  <meta property="og:url" content="http://willkoehler.net/2014/12/22/alternate-route-options-for-the-olentangy-trail.html"/>
  <meta property="og:image" content="http://willkoehler.net/images/olentangy-trail/bike-boulevard-on-linworth-road-east.jpg"/>
   -->
  <meta property="og:description" content="health Data pghd fitbit"/>
  <meta name="description" content="The Patient Generated Health Data Deluge "/>

  <meta property="og:site_name" content="Raj Vansia">
</head>
<body>

  <header class="site-header">
    <nav>
      <a class="brand" href="/">
        <img src="/images/logo.png" alt="Inc">
      </a>
      <a href="/">Blog</a>
      <a href="/about">About</a>
    </nav>
  </header>


<!-- <div class="article-cover" style="background-image:url(https://lh3.googleusercontent.com/ym99kcNrnmKiPhr0ZtunGy-jy3EsNMU523iLcCkJn6fHpYMryq2CKa3VqqghunkU5-9Wp8XjPGYeZMZKCr1w-yidRJQ24_bX-hqHfsdXfhMDEWeHfFJtJGi9zybtsAqb6eZVlJ0C1dDhfpuScQxUex3752XDCX7QIGlSZhBWo08bLTZcOxWftofJA0RaRroiNtoSJDPFRYhT0NUltr1MUGUH8eimaF628Az6XZUahsc3UYhNREAbw9ciKCeK9bgC9I_h03rW_sofacD9dZJpGma1wOnrEnEjibYTSGFeJI6ITzoRPP2ZHzrz4TpZMuYKTS8IbI8sadolGYe5XZinxEDfzDyS3u_d6xViL-iRsqbsoigrCB49huTmJ6XjSbYih4EdCjK_dERmCrreA_gcQZ05F9PZV9i16-SvkVeRcm8PYUaipZUlaZnlyaBkNfPrKl1CxO9PX-w9dy15xlfXbhTtEzizLxZ6U-SpZRQf6jv5p2imYTpdlUholNXwr0nbnji-lKHA50ef5r8iHOKd8tvruzwsgZnL15gdMLPn0PY39_AuB_K5nOft5StAro6LnC2c=w799-h599-no)"></div> -->


<!-- <div class='cover-caption'><a href='/about.html#pictures'>Swiss Alps Photo: Janki Vansia</a></div> -->

<div class="article-cover" style="background-image:url(/images/meditation-tree.jpg)"></div>


<div class='cover-caption'><a href='/about.html#pictures'>Meditation peace tree relax</a></div>


<article >

  <div class="container">
    <header>
      <div class="meta">
        By <address><a rel="author" href="" title="Raj Vansia" target="_blank">Raj Vansia</a></address> &mdash;
        <time pubdate datetime="2017-30-January" title="Jan 30, 2017">Jan 30, 2017</time> &mdash;
        
9 min read
      </div>
      <h1 class="title">React-Native Firebase</h1>
      <h2 class="subtitle"></h2>
    </header>

    <section>
      <h2 id="react-native-firebase-tutorial">React-Native Firebase Tutorial</h2>
<p>Getting Started With React Native and Firebase Tutorial</p>

<p>I finally bit the bullet and bought a mac recently. The first thing I wanted to do was try out was Xcode and build some simple apps. I have past experience using React so I thought it would be natural to play around with React Native to build a simple app with a firebase backend.</p>

<p>Today we will be making a simple food list app that will allow users to choose what meals they would like to have during the week. We will use fire base to store the meal information and we can easily add edit and delete any meal. We will have three main scenes one is the list view where you can see all your meals sorted by day. In this scene we can also swipe left and delete a meal that we no longer want . The next scene will be the meal detail where you can get more information on the meal such as ingredients. This scene will be triggered when you click on an individual meal. Lastly we will have an add/edit scene. I am still learning flex and how to style my code so if you have any tips to improve the look of the app let me know! Here is the GitHub page for the code.  For my next project I would like to use the FHIR api to develop some simple react-native healthcare apps that can pull in patient information.</p>

<h2 id="install-the-following-packages">Install the following packages.</h2>

<p>To get started you need to install react native you can follow the basic install guide steps here. 
install the following addiontal packages we will use for this app. 
NPM install react-native
NPM install react-native-form-generator
NPM install @maintained-repos/react-native-swipeout
NPM install firebase
NPM install react-native-vector-icons.</p>

<p>You can also look at the package dependencies here.</p>

<p>One of the things I wish someone told me sooner was that you can debug and view console.log statements straight in the terminal. you just need to run react-native log-ios
Starting from a new react-native project create a new folder called components. This is where each of your react components such as The list of meals, add and edit pages will live. To launch a react native app type react-native run-iOS. This will package your app and launch the simulator. The index.ios.js file is the entry point into your app.</p>

<h2 id="create-a-nav-bar-header">Create a Nav Bar header</h2>

<p>The Nav bar header will be the area where most of our navigation controls will be located. In this app we will have an Add and Edit button to the user can add new meals. Addtiionaly when the user traverses through different scenes a back button will be used to go back one scene.</p>

<h2 id="create-a-listview-for-displaying-the-list-of-weekly-meals">Create a Listview for displaying the list of weekly meals</h2>
<p>For our main page in our app we will be using a list view to display the the  daily meals sorted by day. They will have the title and image of the meal. We can delete an item by swiping left. Additionally we will have a navigation bar where we can add a new meal.
The main components of list view are datasource and rowData. You can think of rowData as each indivual meal in our database. With that you can call the specific keys for that data such as the meal title or the meal day. So for each meal in the list it will render a row item each with its specific information.</p>

<h2 id="connecting-to-firbase">Connecting to Firbase</h2>

<p>First lets create an entry in firebase. So now in our react code we want to gain access to this data and display it in our list view. the list view component works by taking in a datasource and rendering each row and section header. 
To gain access to our firebase api we will need to make a call to our database from our react app. We can create a separate file so we can call Firebase in from multiple files in our app. If you try to initiate Firebase you will get an error saying firebase has already been defaulted.. Create a firebaseconfig object with your unique firebase keys. We will be using the database portion of firebase so you want to export that so it can be accessed through different files. Firebase also comes with a login feature. 
You can now add this to our meal list where we will call firebase to gain access to our recipes. We specify in our call the specific node of the database we want data from. In this case its all the meals.</p>

<p>For this app we will use a simple Firebase schema so we can retrieve information about our meal. Each item will have a unique key, title, day, ingredients list, and image. 
With Firebase you can manually enter in data into the database which is great for prototyping. So we are going to add data for a few meals so we can display them in our list view. Later on we will add data using our app instead.</p>

<p>listenForItems function will update the state when there are any new changes to the meals database. It will update the state with any changes which will allow our react components to update accordingly without having a page refresh. That is one of the great features of react is that it has the ability to update only the components needed when it notices a change in data.</p>

<h2 id="how-to-create-and-order-section-headers">How to create and order section headers</h2>

<p>In order to organize meals by day we need to create mapping function that groups the meals that have the same day together. This will create a header for each of the meals for the particular day.</p>

<p>If you do not set the header with the initial mapping order it will not go in sequential order with the days. This is because it will it will just go off of what comes first in the database. 
 As you can see below Sunday does not come after Monday although i wish it did! So to order the data we are setting the initial order of our map to correspond to the days of the week in our array..
var dayMap = {Monday:[],Tuesday:[],Wednesday:[], Thursday:[], Friday:[], Saturday:[], Sunday:[]};</p>

<h2 id="create-a-detail-view-for-each-meal">Create a detail view for each meal.</h2>
<p>Detail view is a scene that displays more information about the meal selected. From list view if you press on a meal it will bring you to detail view so you can look at the ingredients and edit any items. So in order to pass the property of the meal to the next scene we pass props which sends over seed data . So in this case all items except for the key might change so we cannot depend on props to have the most up to date state. We will use the key to pull data for our meal. So if the data gets updated in an other app we will see the data get updated in our view. One of the things that I ran into was when i used Props to pass state for all items such as title and image this is actually an anti pattern in React. If I edited meal and clicked the back button the data of the meal would not be updated because its state is from the props being passed from the original view and not the most current data in the database. So i had to set the state of the title and image of the meal to listen to any database changes. The key would still be props because we do not want that to change and it will be used to query our database to retrieve these items. 
If you look at our detail view scene we have a few components. The top title bar includes the meal name and the day. While the two cards below it display the image and ingredient list.</p>

<h2 id="create-an-add-button-to-create-a-new-meal">Create an Add button to create a new meal</h2>
<p>Instead of manually adding new items directly through the firebase console to update the database we will create a new component in our app to add new meals. For the first iteration we will be able to define the meal’s name, image and what day we plan on eating it. In the home screen we have an add button so the user can easily add a new meal. Once this button is pressed it will render a new scene which is the MealForm component. For our form component we will be using react-native-form-generator package. It will allow form data to be captured in a form object that can then be passed into our firebase database. 
We are using a package to easily handle creating forms. The point of the form is to take the user inputs and then when the save button is clicked to upload the value of the form entires to our database.<br />
For firebase we have .push which creates a new entry within the database with. a unique key. We pass the following meal object ’s key and value pairs. Next we will clear the form and automatically navigate back to our main meal list screen where you can see the newly entered meal information.</p>

<h2 id="how-to-upload-an-image">How to upload an image</h2>
<p>To upload a image to our app from our image library we will call the . A neat trick I found was that you can save images from the web directly on your simulator. So I saved a few pictures of the foods i want to add. The function will get the image’s local file path. This path will be saved to our firebase database.</p>

<p>In part 2 i will show you how to edit and delete meals from your list</p>

      
<div class="social">
  
  <div class='twitter'>
    <a href="https://twitter.com/share" class="twitter-share-button"  data-text="React-Native Firebase" data-related="zenpra">Tweet</a>
  </div>
  

  
  <div class='facebook'>
    <div class="fb-share-button" data-layout="button_count"></div>
  </div>
  

  
    
  

  
  <div class='reddit'>
    <a href="//www.reddit.com/submit" onclick="window.open('//www.reddit.com/submit?url=http://hungrygreenhippo.com/React-native-firebase/&title=React-Native+Firebase'); return false"> <img src="//www.redditstatic.com/spreddit7.gif" alt="submit to reddit" border="0" /> </a>
  </div>
  
</div>

    </section>

    <footer>
      <address>
        <img src="/images/rajv.PNG">
        <p>Written by <strong><a rel="author" href="https://twitter.com/rajvansia" title="" target="_blank">Raj Vansia</a></strong><br>
          <span class="muted">Biomedical Engineer IoT</span>
        </p>
      </address>
       
<div class="social">

  <div class='twitter'>
    <a href="https://twitter.com/share" class="twitter-share-button"  data-text="REal time tracking system" data-related="Rajvansia">Tweet</a>
  </div>



  <div class='facebook'>
    <div class="fb-share-button" data-layout="button_count"></div>
  </div>






<!--
  <div class='reddit'>
    <a href="//www.reddit.com/submit" onclick="window.open('//www.reddit.com/submit?url=http://willkoehler.net/2014/12/22/alternate-route-options-for-the-olentangy-trail.html&title=Alternate+Route+Options+For+The+Olentangy+Trail'); return false"> <img src="//www.redditstatic.com/spreddit7.gif" alt="submit to reddit" border="0" /> </a>
  </div> -->

</div>

    </section>

    <footer>
      <!-- <address>
        <img src="/images/wk.jpg">
        <p>Written by <strong><a rel="author" href="https://twitter.com/wckoehler" title="" target="_blank">Will Koehler</a></strong><br>
          <span class="muted">Cycling advocate and web developer.</span>
        </p>
      </address>
      <section class="post_summary">
        <h3 class="title">Previous story: <a href="/2014/11/07/client-side-solution-for-downloading-highcharts-charts-as-images.html" rel="prefetch">Client-Side Solution For Downloading Highcharts Charts as Images</a></h3>
        <p>I wanted a straightforward, client-side solution for downloading the SVG charts generated by Highcharts as images. It can be done, but relies on a set of web technologies that are still evolving.</p>
        <hr>
      </section> -->


      <section>
        <div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//rajvansia.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
      </section>

    </footer>
  </div>
</article>


<footer class="site-footer">
  <div class="container">
    &copy; 2015 Raj Vansia

    <nav>
      <a href="/">Blog</a> &middot;
      <a href="/about">About</a>
    </nav>



    <ul class="social-networks bounce">
      <!-- <li><a href="https://www.linkedin.com/in/rajvansia" class="icon-linkedin">LinkedIn</a></li>
      <li><a href="https://twitter.com/rajvansia" class="icon-twitter">Twitter</a></li>
      <li><a href="https://facebook.com/raj.vansia" class="icon-facebook">Facebook</a></li>
       -->
       <li><a href="https://www.linkedin.com/in/rajvansia" class="icon-linkedin">LinkedIn</a></li>
        <li><a href="https://github.com/rajvansia" class="icon-github">GitHub</a></li>
        <li><a href="https://facebook.com/raj.vansia" class="icon-facebook">Facebook</a></li>
      <!-- <li><a href="https://twitch.tv" class="icon-twitch">Twitch</a></li>
      <li><a href="https://github.com" class="icon-github">GitHub</a></li>
      <li><a href="https://pinterest.com" class="icon-pinterest">Pinterest</a></li>
      <li><a href="https://instagram.com" class="icon-instagram">Instagram</a></li>
      <li><a href="https://vimeo.com" class="icon-vimeo">Vimeo</a></li> -->
    </ul>
    <div>Based on Incorporated theme by <a href="https://sendtoinc.com">Inc</a></div>
  </div>
</footer>

</body>
</html>
